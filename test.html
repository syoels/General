<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,600' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//cdn.rawgit.com/syoels/General/8b1dc19b45a58d043ff889c41310256832fba796/test.css">

<div class="dz-container">

  <div class="dz-head dz-shade">
    <div class="dz-title-container dz-vertical-center">
      <h3>DEALZONE</h3>
      <img src="https://autoleadstar.com/images/logo.svg" alt="AutoLeadStar" style="width: 45%; margin-top: 5px;">
    </div>
  </div>
  
  <!-- TODO: delete message window when no longer needed. -->
  <div class="msg-window">message window</div>
  
  <div class="dz-body">
      <div class="dz-item dz-shade" id="dz-item-1">
        	<h3 id="dz-car-title">2016 NISSAN VERSA</h3>
      	<div class="dz-item-bottom">
      		<div class="dz-left">
      			<div class="dz-item-title">Price</div>
      		</div>
      		<div class="dz-right">
      			<div class="dz-old-price">$13,195</div>
      			<div class="dz-new-price dz-blue-txt">$10,999</div>
      		</div>
      	</div>
      </div>
      <div class="dz-item dz-shade" id="dz-item-2">
        <div class="dz-vertical-center">
          <button class="dz-btn dz-orange hoverable">TEST DRIVE</button>
          <button class="dz-btn dz-blue hoverable">CALL</button>
        </div>
      </div>
      <div class="dz-item dz-shade" id="dz-item-3">
        <div class="dz-left">
          <div class="dz-item-title">Heat score</div>
        </div>
        <div class="dz-right"></div>
      </div>
      <div class="dz-item dz-shade" id="dz-item-4">
        <div class="dz-left">
          <div class="dz-item-title">Currently viewing this car</div>
        </div>
        <div class="dz-right"></div>
      </div>
      <div class="dz-item dz-shade" id="dz-item-5">
        <div class="dz-left">
          <div class="dz-item-title">Availability</div>
        </div>
        <div class="dz-right"></div>
      </div>
      
      <div class="dz-shade dz-blue" id="dz-item-last"></div>
  </div>

</div>

<script   src="https://code.jquery.com/jquery-3.0.0.min.js"   integrity="sha256-JmvOoLtYsmqlsWxa7mDSLMwa6dZ9rrIdtrrVYRnDRH0="   crossorigin="anonymous"></script>
<script>


$ = jQuery; //TODO: make sure this is needed, otherwise delete this line

/*===========================
    Demo & test functions
============================*/
function writeMsg(txt){
  $('.msg-window').text(txt);
}
writeMsg('Dealzone is running. messages here.');

function handleDemoData(e){
  console.log("received demo data. handling");
  console.log(e);
  if(e.data.type && e.data.type == 'carDetails'){
    var carTitle = e.data.data.year + " " + e.data.data.model + " " + e.data.data.make + " " + e.data.data.name;
    $('#dz-car-title').text(carTitle);
    $('.dz-old-price').text('$' + e.data.data.price);
    $('.dz-new-price').text('$' + Math.round(parseFloat(e.data.data.price) * 0.95));
  }
}
window.addEventListener("message", handleDemoData, false);


/*===========================
        Communication
============================*/
window.addEventListener("message", receiveMessage, false);
function receiveMessage(event) {
  console.log("in 2nd event handler");
  var data = (typeof event.data === 'string') ? '"' + event.data + '"' : 'data';
  var origin = event.origin || event.originalEvent.origin; // For Chrome, the origin property is in the event.originalEvent object.
  writeMsg('Got ' + data + ' from "' + origin +'"');
}

  
</script>
